# V2-1：模块（抓取源）——微信公众号文章抓取与转换

## 1. 目的与范围
- 在抓取源页面（`mp.weixin.qq.com`）获取文章内容并形成可用于多渠道发布的基础数据。
- 本文仅定义“抓什么、何时算成功、失败如何提示”，不涉及实现细节。

## 2. 触发与前置条件
- 用户打开已发布的微信公众号文章页。
- 页面内存在发布面板（见 `V2-2`），用户在面板内触发开始。

## 3. 抓取字段（必须/可选）
### 3.1 必须抓取（最小集合）
- 标题
- 正文 HTML（以渲染后为准）
- 原文链接（当前页面 URL）

### 3.2 可选抓取
- 作者/公众号名、发布时间
- 封面图/首图（若可可靠获取）

## 4. 转换（需求级）
- 需保留一份“渲染后 HTML”作为主输出。
- 需为渠道适配留出输出扩展口（例如 HTML/Markdown 等），具体渠道要求在各渠道文档中定义（`V2-5`~`V2-10`）。
- 本期不做图片上传：涉及图片的差异与限制必须在诊断区提示（见 `V2-4`）。

## 5. 成功标准（验收）
- 能从目标页面稳定获得“最小集合”字段且非空。
- 抓取结果可被后续模块消费（`V2-3`），并进入渠道执行流程。

## 6. 失败场景与提示（必须）
失败时在面板诊断区给出提示（详见 `V2-4`）：
- 未识别为文章页/页面类型异常：提示“当前页面不是可抓取的公众号文章页”。
- 标题为空或抓取失败：提示“无法提取文章标题”，并在本地开发时提供更详细线索。
- 正文为空或抓取失败：提示“无法提取文章内容”，并在本地开发时提供更详细线索。
- DOM 结构变更：提示“页面结构可能已变更”，并输出关键节点缺失信息（字段规范见 `V2-4`）。

## 7. 非功能性需求
- 性能：不得明显影响页面交互；触发抓取应在可接受时间内完成。
- 兼容：优先支持最新版本 Chrome。
- 安全与隐私：遵循 `V2-0`。

## 8. 依赖关系
- 依赖 `V2-0` 的术语、字段与成功标准口径。
- 面板与诊断展示依赖 `V2-2`、`V2-4`。

