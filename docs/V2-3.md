# V2-3：模块（执行）——任务编排与执行模型（适配器规范、草稿/发布抽象）

## 1. 目的与范围
- 定义“从抓取到执行”的通用执行模型，确保各渠道以一致方式实现“保存草稿/直接发布”。
- 本文仅定义需求级规范，不包含实现细节与代码结构。

## 2. 渠道适配器（需求级）必须能力
每个发布渠道必须具备以下能力（以“模拟用户操作”为原则）：
- 能进入该平台的创作/编辑入口（例如创建新内容或打开草稿编辑界面）
- 能填充标题
- 能填充正文（以抓取源的渲染后 HTML 为主要输入；若平台需要 Markdown/纯文本等，由渠道文档明确）
- 能触发“保存草稿”并满足草稿成功可见标准（见 `V2-0`）
- 能触发“直接发布”，并完成发布提交链路，最终确认发布成功（见 `V2-0`）

## 3. 模拟用户操作（通用约束）
- 执行过程必须以页面内交互为准：输入、点击、粘贴、确认等。
- 不依赖直调平台接口作为主要发布路径（避免引入对 cookies/token 的非预期处理方式；安全约束见 `V2-0`）。

## 4. 任务编排（通用要求）
- 默认执行策略：以“可验收的稳定性”为优先，允许以串行方式逐渠道执行；并发作为后续扩展能力不在本文强制要求内。
- 每个渠道执行应产生可追踪的阶段信息（例如：开始/进入编辑页/填充标题/填充正文/保存草稿/提交发布/确认成功等），用于诊断区展示（字段与展示规范见 `V2-4`）。
- 单渠道失败不应阻断其他渠道的执行（除非用户主动停止；停止策略不在本文限定）。

## 5. 成功标准（验收）
- 在面板选择任意目标渠道并执行，能够走通草稿或发布动作，并满足对应成功可见标准（见 `V2-0`）。
- 执行过程中的关键阶段信息能在诊断区被用户理解地展示（见 `V2-4`）。

## 6. 失败场景（必须覆盖）
执行过程中至少需要覆盖并能提示以下失败场景（提示规范见 `V2-4`）：
- 未登录
- 风控/验证码
- 内容超限/格式不支持
- DOM 结构变更（找不到关键节点/按钮/编辑器）

## 7. 依赖关系
- 依赖 `V2-0` 的动作定义与成功标准。
- 面板交互依赖 `V2-2`。
- 诊断区规范依赖 `V2-4`。
- 各渠道细则见 `V2-5` ~ `V2-10`。

