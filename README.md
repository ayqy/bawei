# bawei（V2）

一款浏览器插件：在微信公众号文章页（`mp.weixin.qq.com`）抓取内容，并一键同步到多平台（CSDN / 腾讯云开发者社区 / 博客园 / OSCHINA / 人人都是产品经理 / 墨问 / 少数派 / 百家号 / 头条号 / 飞书文档）。

## 功能介绍

bawei 是一款专为内容同步发布设计的浏览器插件：打开微信公众号文章页后，通过页面内的发布面板，将文章抓取并同步到多个目标平台。

我们的核心目标是：**让内容创作者能够轻松实现跨平台内容分发，节省大量时间和精力。**

---

### ⭐ 核心功能

1. **一键内容提取**
   - 智能识别微信公众号文章的标题和正文
   - 保持原有的格式和样式
   - 支持富文本内容（图片、链接、格式等）

2. **多平台并发执行**
   - 一次开始后并发打开 10 个目标平台编辑页
   - 自动填充标题与正文
   - 支持“保存草稿 / 直接发布”

3. **智能兼容性**
   - 以页面内交互为准（模拟用户操作）
   - 针对各平台编辑器做基础适配

4. **用户友好设置**
   - 支持自动发布开关
   - 支持自动关闭原页面
   - 多语言界面支持

## 如何使用

### 1. 安装插件

从 Chrome 网上应用店安装 bawei 插件。

### 2. 在微信公众号文章页面使用

1. 打开任意微信公众号文章页面（`mp.weixin.qq.com` 域名）
2. 等待页面完全加载后，页面右上角会出现插件 icon，点击后打开“发布面板”
3. 点击面板右上角“关闭”，面板会收起并回到右上角 icon
4. 面板顺序固定为：动作选择 -> 渠道选择 -> 执行按钮（开始/停止）-> 诊断输出区（默认隐藏，开始后自动显示在按钮下方）
5. 渠道选择区支持：
   - 勾选本次执行渠道（checkbox）并在同一行右侧查看“状态 + 进度（stage/userMessage）”
   - 诊断聚焦下拉：选择当前要查看诊断的渠道（执行过程中允许切换，仅影响诊断展示与下次启动时前台打开的渠道）
   - 全选/全不选：一键切换（执行中禁用）
6. 当执行渠道“全不选”时，“开始”按钮会置灰不可点击
7. 点击“开始”后按钮变红且文案变为“停止”，可随时点击“停止”强行中断后续步骤（不会关闭已打开的渠道 tab；状态保留停止时快照）

### 3. 发布流程（V2）

1. **内容提取**：提取标题、正文渲染后 HTML、原文链接（当前页面 URL）
2. **并发打开渠道**：同时打开所选平台编辑页并开始执行
3. **诊断与处理**：诊断区开始后自动展开；如遇未登录/验证码/实名等平台要求，按诊断提示手动完成后点击“继续/重试”

### 4. 设置选项

您可以在插件设置中配置：

- **自动发布**：是否在填充内容后自动点击发布按钮
- **自动关闭原页面**：是否在成功发布后自动关闭微信文章页面
- **语言设置**：选择界面语言（中文/英文）

## 技术特点

- **纯前端实现**：无需任何服务器，完全在浏览器中运行
- **智能等待机制**：自动检测页面元素加载状态
- **兼容性强**：支持多种富文本编辑器
- **用户体验优化**：提供实时反馈和状态提示

## 注意事项

- 建议在发布前检查内容格式是否正确
- 某些特殊格式可能需要手动调整
- 图片策略：本期不支持图片上传，默认复用原文外链；如平台限制外链导致图片不可用，请按诊断提示手动重新上传/替换。

---

希望这款插件能够帮助您更高效地进行跨平台内容分发！如果您有任何问题或建议，欢迎反馈。

## E2E 测试（Playwright）

- 导出登录态（用于复用已登录站点的 cookie / localStorage）：`npm run e2e:export-state`
- 运行 E2E：`npm run e2e:v2`（可选：`npm run e2e:v2 <channelId>`）
